<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd">

  <!-- zebra 默认使用c3p0数据源 -->
  <bean id="crmDataSource" class="com.dianping.zebra.group.jdbc.GroupDataSource" init-method="init">
    <property name="jdbcRef" value="mmbaby"/>
    <property name="routerType" value="fail-over"/>
    <!-- 选择配置源，默认是remote方式，这里使用的是local方式，意味着配置是本地文件 -->
    <property name="configManagerType" value="local" />
    <property name="maxIdleTime" value="1800" />
    <property name="idleConnectionTestPeriod" value="60" />
    <property name="acquireRetryAttempts" value="3" />
    <property name="acquireRetryDelay" value="300" />
    <property name="maxStatements" value="0" />
    <property name="maxStatementsPerConnection" value="100" />
    <property name="numHelperThreads" value="6" />
    <property name="maxAdministrativeTaskTime" value="5" />
    <property name="preferredTestQuery" value="SELECT 1" />
  </bean>

  <bean id="queryDataSource" class="com.dianping.zebra.group.jdbc.GroupDataSource" init-method="init">
    <property name="jdbcRef" value="crmadmin"/>
    <property name="routerType" value="load-balance"/><!-- 只走读库 -->
  </bean>

  <bean id="jdbcTemplate"
    class="org.springframework.jdbc.core.JdbcTemplate" abstract="false"
    lazy-init="false" autowire="default">
    <property name="dataSource">
      <ref bean="queryDataSource"/>
    </property>
  </bean>

</beans>